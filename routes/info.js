const express = require('express');
const { authenticateToken } = require('../middleware/auth');

const router = express.Router();

// Get FAQ information
router.get('/faq', authenticateToken, (req, res) => {
    const faqData = [
        {
            id: 1,
            question: 'Как получить допуск?',
            answer: 'Для получения допуска необходимо заполнить чек-лист и загрузить все требуемые фотографии. После этого нажмите кнопку "Получить допуск".'
        },
        {
            id: 2,
            question: 'Сколько действует допуск?',
            answer: 'Допуск действует 16 часов с момента получения. После истечения времени необходимо получить новый допуск.'
        },
        {
            id: 3,
            question: 'Какие фотографии нужно загрузить?',
            answer: 'Необходимо загрузить: 2 фотографии путевого листа, фотографию автомобиля снаружи и фотографию салона автомобиля.'
        },
        {
            id: 4,
            question: 'Что делать, если фотография не загружается?',
            answer: 'Убедитесь, что фотография сделана камерой телефона и имеет формат JPG или PNG. Размер файла не должен превышать 10MB.'
        },
        {
            id: 5,
            question: 'Как связаться с поддержкой?',
            answer: 'Вы можете связаться с поддержкой через раздел "Контакты" в главном меню или по телефону указанному в приложении.'
        }
    ];

    res.json({
        success: true,
        faq: faqData
    });
});

// Get instructions
router.get('/instructions', authenticateToken, (req, res) => {
    const instructionsData = {
        title: 'Инструкция по получению допуска',
        steps: [
            {
                step: 1,
                title: 'Заполните чек-лист',
                description: 'Отметьте все пункты чек-листа, убедившись, что ваш автомобиль готов к работе.',
                icon: 'checklist'
            },
            {
                step: 2,
                title: 'Загрузите фотографии',
                description: 'Сделайте фотографии путевого листа (2 шт.), автомобиля снаружи и салона. Фото должны быть сделаны камерой телефона.',
                icon: 'camera'
            },
            {
                step: 3,
                title: 'Получите допуск',
                description: 'После заполнения всех пунктов и загрузки фотографий нажмите кнопку "Получить допуск".',
                icon: 'permit'
            },
            {
                step: 4,
                title: 'Начните работу',
                description: 'Допуск действует 16 часов. Вы можете принимать заказы от Яндекс.Такси и партнёров.',
                icon: 'work'
            }
        ]
    };

    res.json({
        success: true,
        instructions: instructionsData
    });
});

// Get safety information
router.get('/safety', authenticateToken, (req, res) => {
    const safetyData = {
        title: 'Требования безопасности',
        sections: [
            {
                title: 'Техническое состояние автомобиля',
                items: [
                    'Исправные световые приборы',
                    'Хорошее состояние резины без повреждений',
                    'Отсутствие трещин на лобовом стекле',
                    'Исправные тормоза и рулевое управление'
                ]
            },
            {
                title: 'Обязательное оборудование',
                items: [
                    'Аптечка первой помощи',
                    'Огнетушитель',
                    'Знак аварийной остановки',
                    'Видеорегистратор (включён)'
                ]
            },
            {
                title: 'Документы и проверки',
                items: [
                    'Действующая лицензия водителя',
                    'Пройденный медосмотр',
                    'Действующий техосмотр',
                    'Страховка ОСАГО'
                ]
            }
        ]
    };

    res.json({
        success: true,
        safety: safetyData
    });
});

// Get terms of service
router.get('/terms', authenticateToken, (req, res) => {
    const termsData = {
        title: 'Условия использования',
        lastUpdated: '2024-01-01',
        sections: [
            {
                title: 'Общие положения',
                content: 'Настоящие условия определяют порядок использования мобильного приложения для водителей такси.'
            },
            {
                title: 'Права и обязанности водителя',
                content: 'Водитель обязуется соблюдать требования безопасности, своевременно проходить допуск и поддерживать автомобиль в исправном состоянии.'
            },
            {
                title: 'Ответственность',
                content: 'Водитель несёт полную ответственность за техническое состояние автомобиля и соблюдение правил дорожного движения.'
            }
        ]
    };

    res.json({
        success: true,
        terms: termsData
    });
});

module.exports = router;